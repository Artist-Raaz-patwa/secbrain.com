/* SecBrain - Responsive Design */

/* Mobile First Approach - Base styles are for mobile */

/* Small Mobile Devices (320px - 480px) */
@media (max-width: 480px) {
  /* Typography adjustments */
  :root {
    --font-size-xs: 0.7rem;
    --font-size-sm: 0.8rem;
    --font-size-base: 0.9rem;
    --font-size-lg: 1rem;
    --font-size-xl: 1.1rem;
    --font-size-2xl: 1.3rem;
    --font-size-3xl: 1.6rem;
    --font-size-4xl: 2rem;
  }
  
  /* Spacing adjustments */
  :root {
    --spacing-1: 0.2rem;
    --spacing-2: 0.4rem;
    --spacing-3: 0.6rem;
    --spacing-4: 0.8rem;
    --spacing-5: 1rem;
    --spacing-6: 1.2rem;
    --spacing-8: 1.6rem;
    --spacing-10: 2rem;
    --spacing-12: 2.4rem;
    --spacing-16: 3.2rem;
    --spacing-20: 4rem;
  }
  
  /* Container adjustments */
  .container {
    padding: 0 var(--spacing-3);
  }
  
  /* Grid adjustments */
  .grid--2,
  .grid--3,
  .grid--4 {
    grid-template-columns: 1fr;
    gap: var(--spacing-4);
  }
  
  /* Button adjustments */
  .button {
    padding: var(--spacing-2) var(--spacing-4);
    font-size: var(--font-size-sm);
  }
  
  .button__icon {
    width: 1rem;
    height: 1rem;
  }
  
  /* Input adjustments */
  .input {
    padding: var(--spacing-2) var(--spacing-3);
    font-size: var(--font-size-sm);
  }
  
  /* Card adjustments */
  .card__header,
  .card__body,
  .card__footer {
    padding: var(--spacing-4);
  }
}

/* Large Mobile Devices (481px - 768px) */
@media (min-width: 481px) and (max-width: 768px) {
  /* Typography adjustments */
  :root {
    --font-size-xs: 0.75rem;
    --font-size-sm: 0.85rem;
    --font-size-base: 0.95rem;
    --font-size-lg: 1.1rem;
    --font-size-xl: 1.2rem;
    --font-size-2xl: 1.4rem;
    --font-size-3xl: 1.7rem;
    --font-size-4xl: 2.1rem;
  }
  
  /* Grid adjustments */
  .grid--2 {
    grid-template-columns: repeat(2, 1fr);
  }
  
  .grid--3,
  .grid--4 {
    grid-template-columns: repeat(2, 1fr);
  }
  
  /* Container adjustments */
  .container {
    padding: 0 var(--spacing-4);
  }
}

/* Tablet Devices (769px - 1024px) */
@media (min-width: 769px) and (max-width: 1024px) {
  /* Grid adjustments */
  .grid--2 {
    grid-template-columns: repeat(2, 1fr);
  }
  
  .grid--3 {
    grid-template-columns: repeat(3, 1fr);
  }
  
  .grid--4 {
    grid-template-columns: repeat(2, 1fr);
  }
  
  /* Container adjustments */
  .container {
    padding: 0 var(--spacing-6);
  }
  
  /* Calendar adjustments for tablet */
  .calendar-day {
    min-height: 100px;
  }
  
  .calendar-day__progress {
    min-height: 50px;
  }
}

/* Desktop Devices (1025px - 1440px) */
@media (min-width: 1025px) and (max-width: 1440px) {
  /* Grid adjustments */
  .grid--2 {
    grid-template-columns: repeat(2, 1fr);
  }
  
  .grid--3 {
    grid-template-columns: repeat(3, 1fr);
  }
  
  .grid--4 {
    grid-template-columns: repeat(4, 1fr);
  }
  
  /* Container adjustments */
  .container {
    padding: 0 var(--spacing-8);
  }
  
  /* Calendar adjustments for desktop */
  .calendar-day {
    min-height: 120px;
  }
  
  .calendar-day__progress {
    min-height: 60px;
  }
}

/* Large Desktop Devices (1441px+) */
@media (min-width: 1441px) {
  /* Container adjustments */
  .container {
    max-width: 1400px;
    padding: 0 var(--spacing-10);
  }
  
  /* Calendar adjustments for large desktop */
  .calendar-day {
    min-height: 140px;
  }
  
  .calendar-day__progress {
    min-height: 70px;
  }
}

/* Landscape Orientation Adjustments */
@media (orientation: landscape) and (max-height: 600px) {
  /* Reduce vertical spacing in landscape mode */
  .header__content {
    padding: var(--spacing-2) var(--spacing-6);
  }
  
  .calendar-nav {
    padding: var(--spacing-3) var(--spacing-6) var(--spacing-2);
  }
  
  .calendar-container {
    padding: 0 var(--spacing-6) var(--spacing-3);
  }
  
  .calendar-day {
    min-height: 80px;
  }
  
  .modal__body {
    max-height: 50vh;
  }
}

/* High DPI Display Adjustments */
@media (-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi) {
  /* Ensure crisp borders on high DPI displays */
  .calendar-grid,
  .calendar-day,
  .modal__content,
  .button,
  .input {
    border-width: 0.5px;
  }
}

/* Touch Device Adjustments */
@media (hover: none) and (pointer: coarse) {
  /* Increase touch targets for mobile devices */
  .button {
    min-height: 44px;
    min-width: 44px;
  }
  
  .nav-button {
    min-height: 44px;
    min-width: 44px;
  }
  
  .header__button {
    min-height: 44px;
    min-width: 44px;
  }
  
  .calendar-day {
    min-height: 100px;
  }
  
  .habit-checkbox {
    width: 24px;
    height: 24px;
  }
  
  /* Remove hover effects on touch devices */
  .button:hover,
  .nav-button:hover,
  .header__button:hover,
  .calendar-day:hover,
  .habit-item:hover {
    transform: none;
    box-shadow: none;
  }
}

/* Print Styles */
@media print {
  /* Hide non-essential elements when printing */
  .header__right,
  .modal,
  .add-habit-form,
  .loading-screen,
  .auth-screen {
    display: none !important;
  }
  
  /* Adjust colors for print */
  .calendar-day {
    border: 1px solid #000 !important;
    background-color: #fff !important;
    color: #000 !important;
  }
  
  .calendar-day--today {
    border: 2px solid #000 !important;
  }
  
  /* Ensure good contrast for print */
  .text-primary,
  .text-secondary,
  .text-muted {
    color: #000 !important;
  }
  
  /* Remove shadows and effects for print */
  .calendar-grid,
  .modal__content,
  .button {
    box-shadow: none !important;
  }
}

/* Reduced Motion Preferences */
@media (prefers-reduced-motion: reduce) {
  /* Disable all animations and transitions */
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }
  
  /* Remove transform effects */
  .button:hover,
  .nav-button:hover,
  .header__button:hover,
  .calendar-day:hover {
    transform: none !important;
  }
}

/* High Contrast Mode */
@media (prefers-contrast: high) {
  /* Increase border widths for better visibility */
  .calendar-grid,
  .calendar-day,
  .modal__content,
  .button,
  .input,
  .habit-checkbox {
    border-width: 2px !important;
  }
  
  /* Ensure sufficient contrast */
  .text-secondary {
    color: var(--text-primary) !important;
  }
  
  .text-muted {
    color: var(--text-secondary) !important;
  }
}

/* Dark Mode Preferences */
@media (prefers-color-scheme: dark) {
  /* Auto-apply dark theme if user prefers dark mode */
  body:not(.theme-light) {
    --bg-primary: var(--color-black);
    --bg-secondary: var(--color-gray-900);
    --bg-tertiary: var(--color-gray-800);
    --text-primary: var(--color-white);
    --text-secondary: var(--color-gray-300);
    --text-muted: var(--color-gray-500);
    --border-color: var(--color-gray-700);
  }
}

/* Light Mode Preferences */
@media (prefers-color-scheme: light) {
  /* Auto-apply light theme if user prefers light mode */
  body:not(.theme-dark) {
    --bg-primary: var(--color-white);
    --bg-secondary: var(--color-gray-100);
    --bg-tertiary: var(--color-gray-200);
    --text-primary: var(--color-black);
    --text-secondary: var(--color-gray-700);
    --text-muted: var(--color-gray-500);
    --border-color: var(--color-gray-300);
  }
}

/* Container Query Support (Future-proofing) */
@supports (container-type: inline-size) {
  .calendar-container {
    container-type: inline-size;
  }
  
  @container (max-width: 400px) {
    .calendar-day {
      min-height: 80px;
    }
  }
  
  @container (min-width: 800px) {
    .calendar-day {
      min-height: 140px;
    }
  }
}

/* Flexbox Gap Support */
@supports not (gap: 1rem) {
  /* Fallback for browsers that don't support gap */
  .flex {
    margin: calc(-1 * var(--spacing-2));
  }
  
  .flex > * {
    margin: var(--spacing-2);
  }
  
  .grid {
    margin: calc(-1 * var(--spacing-3));
  }
  
  .grid > * {
    margin: var(--spacing-3);
  }
}

/* CSS Grid Support */
@supports not (display: grid) {
  /* Fallback for browsers that don't support CSS Grid */
  .calendar-grid {
    display: flex;
    flex-wrap: wrap;
  }
  
  .calendar-day {
    width: calc(100% / 7);
    min-width: calc(100% / 7);
  }
  
  .grid {
    display: flex;
    flex-wrap: wrap;
  }
  
  .grid--2 > * {
    width: calc(50% - var(--spacing-6));
  }
  
  .grid--3 > * {
    width: calc(33.333% - var(--spacing-6));
  }
  
  .grid--4 > * {
    width: calc(25% - var(--spacing-6));
  }
}
